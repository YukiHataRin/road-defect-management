<form id="searchForm" class="search-form">
    <div class="mb-3">
        <label class="form-label">城市</label>
        <div id="cityCheckboxes" class="border rounded p-2" style="max-height: 200px; overflow-y: auto;">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="city_all" value="">
                <label class="form-check-label" for="city_all">全部</label>
            </div>
            <div class="checkbox-grid"></div>
        </div>
    </div>
    <div class="mb-3">
        <label class="form-label">行政區</label>
        <div id="districtCheckboxes" class="border rounded p-2" style="max-height: 200px; overflow-y: auto;">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="district_all" value="">
                <label class="form-check-label" for="district_all">全部</label>
            </div>
            <div class="checkbox-groups"></div>
        </div>
    </div>
    <div class="mb-3">
        <label class="form-label">街道</label>
        <div id="roadCheckboxes" class="border rounded p-2" style="max-height: 200px; overflow-y: auto;">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="road_all" value="">
                <label class="form-check-label" for="road_all">全部</label>
            </div>
            <div class="checkbox-groups"></div>
        </div>
    </div>
    <div class="mb-3">
        <label class="form-label">瑕疵類型</label>
        <div id="defectTypeCheckboxes" class="checkbox-container">
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="defect_type_all" checked>
                <label class="form-check-label" for="defect_type_all">全部</label>
            </div>
            <div class="checkbox-grid">
                <div class="form-check">
                    <input type="checkbox" class="form-check-input defect-type-checkbox" id="defect_type_0" name="defect_type" value="0" checked>
                    <label class="form-check-label" for="defect_type_0">橫向裂紋</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input defect-type-checkbox" id="defect_type_1" name="defect_type" value="1" checked>
                    <label class="form-check-label" for="defect_type_1">縱向裂紋</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input defect-type-checkbox" id="defect_type_2" name="defect_type" value="2" checked>
                    <label class="form-check-label" for="defect_type_2">鱷魚紋</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input defect-type-checkbox" id="defect_type_3" name="defect_type" value="3" checked>
                    <label class="form-check-label" for="defect_type_3">坑洞</label>
                </div>
            </div>
        </div>
    </div>
    <div class="mb-3">
        <label class="form-label">嚴重程度</label>
        <div id="severityCheckboxes" class="checkbox-container">
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="severity_all" checked>
                <label class="form-check-label" for="severity_all">全部</label>
            </div>
            <div class="checkbox-grid">
                <div class="form-check">
                    <input type="checkbox" class="form-check-input severity-checkbox" id="severity_0" name="severity" value="0" checked>
                    <label class="form-check-label" for="severity_0">輕微</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input severity-checkbox" id="severity_1" name="severity" value="1" checked>
                    <label class="form-check-label" for="severity_1">中等</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input severity-checkbox" id="severity_2" name="severity" value="2" checked>
                    <label class="form-check-label" for="severity_2">嚴重</label>
                </div>
            </div>
        </div>
    </div>
    <div class="mb-3">
        <label for="start_time" class="form-label">開始時間</label>
        <input type="datetime-local" class="form-control" id="start_time" name="start_time">
    </div>
    <div class="mb-3">
        <label for="end_time" class="form-label">結束時間</label>
        <input type="datetime-local" class="form-control" id="end_time" name="end_time">
    </div>
    <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary flex-grow-1">
            <i class="bi bi-search"></i> 搜尋
        </button>
        <button type="button" id="resetButton" class="btn btn-secondary">
            <i class="bi bi-arrow-counterclockwise"></i> 重置
        </button>
    </div>
</form>

<script src="/static/js/defects/location_selector.js"></script>
<script>
// 移除未使用的 fetchDefects 函數
</script>

<style>
.checkbox-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 0.5rem;
    padding: 0.5rem;
}

.checkbox-groups {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 0.5rem;
}

.checkbox-group {
    border-bottom: 1px solid #dee2e6;
    padding-bottom: 0.5rem;
    margin-bottom: 0.5rem;
}

.checkbox-group:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.checkbox-group-title {
    font-weight: bold;
    margin-bottom: 0.5rem;
    color: #666;
    font-size: 0.9rem;
}

.checkbox-group-content {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 0.5rem;
}

.form-check {
    margin-bottom: 0;
}

.checkbox-container {
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    padding: 0.5rem;
    background-color: #fff;
}

.form-check {
    margin-bottom: 0.25rem;
}

.form-check-label {
    user-select: none;
}
</style> 